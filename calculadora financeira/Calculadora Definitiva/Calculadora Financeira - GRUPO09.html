<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Inteligente</title>
    <link rel="stylesheet" href="estilizacaocalculadora.css">
</head>

<body>
    <div>
        <h1>Ticket médio e taxa de conversão</h1>
        Inserir total de clientes que entraram na loja: <input type="text" id="input_total">
        <br><br>
        Inserir total de vendas realizada no dia: <input type="text" id="input_vendas">
        <br><br>
        Inserir faturamento do dia (em R$): <input type="text" id="input_valor">
        <br><br>
        <button onclick="exibir ()">Calcular Ticket e Conversão</button>
        <br><br>
        <div id="div_mensagem"></div>
    </div>
    <div>
        <h1>Perdas de Vendas</h1>
        Insirir média de clientes por dia: <input type="text" id="input_media">
        <br><br>
        Inserir Ticket médio (em R$): <input type="text" id="input_ticket">
        <br><br>
        <button onclick="calcular ()">Calcular Perdas</button>
        <br><br>
        <div id="div_mensagem1"></div>
    </div>
    <div>
        <h1>Simulador financeiro para loja/supermercado</h1>
        Qual o seu faturamento (em R$): <input type="number" id="input_faturamento">
        <br><br>
        Custo fixo mensal (em R$): <input type="number" id="input_custo_fixo">
        <br><br>
        Custo variável (em %): <input type="number" id="input_custo_variavel">
        <br><br>
        Investimento inicial (em R$): <input type="number" id="input_investimento">
        <br><br>
        <button onclick="simular()">Calcular Simulador Financeiro</button>
        <br><br>
        <div id="div_simulador"></div>
    </div>

</body>

</html>
<script>
var taxa = 0
    function exibir() {
        var total = Number(input_total.value)
        var vendas = Number(input_vendas.value)
        var valor = Number(input_valor.value)
        var ticket = valor / vendas
        taxa = vendas / total * 100
        if (taxa < 50) {
            div_mensagem.innerHTML = `Ticket médio: R$${ticket.toFixed(2)} <br> 
        <span style="color: red;">Taxa de conversão: ${taxa.toFixed(2)}%</span> `
        } else {
            div_mensagem.innerHTML = `Ticket médio: R$${ticket.toFixed(2)} <br> 
        Taxa de conversão: ${taxa.toFixed(2)}%`
        }
                input_ticket.value= ticket
    }
    function calcular() {
        var media_clientes = Number(input_media.value);
        var ticket = Number(input_ticket.value);
        var clientes_perdidos = media_clientes * (100 - taxa) / 100;
        var perda_vendas = clientes_perdidos * ticket;

        if (perda_vendas > 0) {
        div_mensagem1.innerHTML = 
                `Clientes Perdidos: ${clientes_perdidos}<br>
                <span style=" color:red;">Perda Oportunidade de Venda: R$${perda_vendas.toFixed(2)}<span><br>`
        } else {
                    div_mensagem1.innerHTML = 
                `Clientes Perdidos: ${clientes_perdidos}<br>
                <span style=" color:green;">Perda Oportunidade de Venda: R$${perda_vendas.toFixed(2)}<span><br>`
        }

    }
    function simular() {
        var faturamento = Number(input_faturamento.value)
        var custoFixo = Number(input_custo_fixo.value)
        var custoVariavel = Number(input_custo_variavel.value)
        var investimento = Number(input_investimento.value)

        var valorCustoVariavel = (custoVariavel / 100) * faturamento

        var lucroBruto = faturamento - valorCustoVariavel
        var lucroLiquido = lucroBruto - custoFixo

        var margemLucro = (lucroLiquido / faturamento) * 100

        var payback = investimento / lucroLiquido
        var paybackAposSistema = payback - (payback * 0.20)

        div_simulador.innerHTML =
        `Lucro bruto: R$${lucroBruto.toFixed(2)} <br>
        Lucro líquido: R$ ${lucroLiquido.toFixed(2)}. <br>
        Margem de lucro: ${margemLucro.toFixed(2)}%. <br>
        Payback: aproximadamente ${payback.toFixed(1)} meses.<br><br>

Estima-se que com nosso sistema, o payback cai até 20%, para ~${paybackAposSistema.toFixed(1)} meses.`


    }
</script>